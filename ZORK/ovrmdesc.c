#include <stdio.h>
#include <string.h>

/* defines, enums ------------------------------------------------------------- */
#define AllocBuf	((void*)0xBB00)

#define OVR_OVERRIDE_OBJECT_DESC	38

#define NUM_OBJECTS  80

#define INSIDE  2048

#define O_YOU 1
#define O_GARLIC 26
#define O_LAMP 36
#define O_CANDLES 42
#define O_TROPHY_CASE 9
#define O_KITCHEN_TABLE 12
#define O_ATTIC_TABLE 13
#define O_MACHINE 10

#define R_ARAGAIN_FALLS 88
#define R_LIVING_ROOM 16 
#define R_EAST_OF_HOUSE 5 
#define R_KITCHEN 14 
#define R_ATTIC 15 
#define R_GRATING_CLEARING 12 
#define R_GRATING_ROOM 36 
#define R_DAM_ROOM 74 
#define R_RESERVOIR_SOUTH 45
#define R_RESERVOIR 46
#define R_RESERVOIR_NORTH 47
#define R_LOUD_ROOM 63
#define R_DEEP_CANYON 61 
#define R_MACHINE_ROOM 105 
#define R_WEST_OF_HOUSE 1 
#define R_MIRROR_R_1 50 
#define R_MIRROR_R_2 51 
#define R_TORCH_ROOM 71 
#define R_DOME_ROOM 70 
#define R_CYCLOPS_ROOM 42
#define R_UP_A_TREE 11 
#define R_PATH 10 

/*object bit flags*/

#define PROP_OPENABLE        1
#define PROP_OPEN            2
#define PROP_LIT             4
#define PROP_NODESC          8
#define PROP_NOTTAKEABLE    16
#define PROP_MOVEDDESC      32  /* set when object is first taken */
#define PROP_INSIDEDESC     64  /* set for objects that are initially 
					described as inside another object */
#define PROP_SACRED        128  /* set for objects that aren't allowed to be taken by thief */
#define PROP_EVERYWHERE    256
#define PROP_WEAPON        512
#define PROP_ACTOR        1024
#define PROP_TOOL         2048
#define PROP_INFLAMMABLE  4096
#define PROP_SURFACE      8192

/*room properties bit flags*/

#define R_DESCRIBED     1  /* set when room description already printed */
#define R_BODYOFWATER   2
#define R_LIT           4  /* set when there is natural light or a light fixture */
#define R_WATERHERE     8
#define R_SACRED       16  /* set when thief not allowed in room */
#define R_MAZE         32
#define R_ALWAYSDESC   64

/* extern data structures ---------------------------------------------------------- */
struct OBJ_STRUCT
{
  unsigned short init_loc;
  unsigned short loc;
  unsigned short size;
  unsigned short capacity;
  unsigned short order;
  unsigned short prop;
  unsigned char init_thiefvalue;
  unsigned char thiefvalue;
};
extern struct OBJ_STRUCT Obj[];

struct ROOM_STRUCT
{
  char *scenery;
  unsigned short prop;
  unsigned short init_prop;
};
extern struct ROOM_STRUCT Room[];

struct OVERRIDEOBJECTDESC_STRUCT
{
  int obj;
  void (*f)(int);
};
struct OVERRIDEOBJECTDESC_STRUCT OverrideObjectDesc[];

extern char *ObjectDesc[];

extern unsigned char YouAreDead;
extern int TrollDescType;
extern int ThiefDescType; /* 0: default  1: unconscious*/
extern int CyclopsState; /* 0: default  1: hungry  2: thirsty  3: asleep  4: fled*/
extern unsigned char YouAreInBoat;
extern unsigned char RugMoved;
extern unsigned char TrapOpen;
extern unsigned char KitchenWindowOpen;
extern unsigned char GratingRevealed;
extern unsigned char GratingOpen;
extern unsigned char GatesOpen;
extern unsigned char LowTide;
extern unsigned char GatesButton;
extern unsigned char LoudRoomQuiet;
extern unsigned char RainbowSolid;
extern unsigned char WonGame;
extern unsigned char MirrorBroken; /* set NotLucky too*/
extern unsigned char RopeTiedToRail;

/* extern functions ---------------------------------------------------------------- */
void PrintCompText(char *comp_text);
void PrintText(char*);
int DecompressText(char *text_in, int size_in, char *text_out);
int IsObjVisible(int obj);

short CallOverlay1(void* Routine, short Par1, char CalledRamBank);
void ReturnOverlay0(short);
void ReturnOverlay0_(short);

/* variables ----------------------------------------------------------------------- */

/* code ---------------------------------------------------------------------------- */

void PrintObjectDesc(int obj, int desc_flag)
{
  int i;
  char *compressed_text, *decompressed_text, *p, *q;
  int compressed_size;

  /*look for object in override obj desc list*/
  for (i=0; OverrideObjectDesc[i].f != 0; i++)
    if (OverrideObjectDesc[i].obj == obj) break;
  if (OverrideObjectDesc[i].f != 0)
    CallOverlay1((void*)OverrideObjectDesc[i].f, desc_flag, OVR_OVERRIDE_OBJECT_DESC); 
    /* (*(OverrideObjectDesc[i].f))(desc_flag); */
  else
  {
    compressed_text = ObjectDesc[obj];
    compressed_size = strlen(compressed_text)+1;
    decompressed_text = p = AllocBuf; /* malloc(GetDecompressTextSize(compressed_text, compressed_size)); */
    DecompressText(compressed_text, compressed_size, decompressed_text);
  
    if (desc_flag)
    {
      p = strchr(p, '^');
      q = NULL;
      if (p != NULL)
      {
        p++;
        q = strchr(p, '^');
        if (q != NULL)
          q++;
      }
  
      if (Obj[obj].prop & PROP_MOVEDDESC)
        p = q;
    }
  
    if (p != NULL && *p != '^' && *p != 0)
      PrintText(p);
  
    /* free(decompressed_text); */
  }
}

/* only display objects inside something else one level deep*/

void PrintContents(int obj, char *heading, int print_empty)
{
  int flag = 0, i;

  for (i=2; i<NUM_OBJECTS; i++)
  {
    int obj_inside = Obj[i].order;

    if ( Obj[obj_inside].loc == INSIDE + obj &&
         (Obj[obj_inside].prop & PROP_NODESC) == 0 &&
         !( (Obj[obj_inside].prop & PROP_INSIDEDESC) &&
            (Obj[obj_inside].prop & PROP_MOVEDDESC) == 0 ))
    {
      if (flag == 0) {PrintLine(heading); flag = 1;}
      PrintCompText("\x20\x20");
      PrintObjectDesc(obj_inside, 0);
      PrintCompText("\x0a");
    }
  }

  for (i=2; i<NUM_OBJECTS; i++)
  {
    int obj_inside = Obj[i].order;

    if ( Obj[obj_inside].loc == INSIDE + obj &&
         (Obj[obj_inside].prop & PROP_NODESC) == 0 &&
         ( (Obj[obj_inside].prop & PROP_INSIDEDESC) &&
           (Obj[obj_inside].prop & PROP_MOVEDDESC) == 0 ))
    {
      flag = 1;
      PrintObjectDesc(obj_inside, 1);
      PrintCompText("\x0a");
    }
  }

  if (print_empty && flag == 0)
    PrintCompLine("\x49\x74\x27\xa1\x65\x6d\x70\x74\x79\x2e");
}

/* print objects at "location"; location can be player's inventory*/

void PrintPresentObjects(int location, char *heading, int list_flag)
{
  int flag, i, obj;

  flag = 0;
  for (i=2; i<NUM_OBJECTS; i++)
  {
    obj = Obj[i].order;

    if (Obj[obj].loc == location &&
        (Obj[obj].prop & PROP_NODESC) == 0)
    {
      if (flag == 0)
      {
        flag = 1;

        if (location == INSIDE + O_YOU)
          PrintCompLine("\xdc\x75\x27\xa9\xb3\xbb\x72\x79\x97\x3a");
        else if (heading != 0)
          PrintLine(heading);
      }

      if (location == INSIDE + O_YOU || list_flag)
        PrintObjectDesc(obj, 0);
      else
        PrintObjectDesc(obj, 1);

      PrintCompText("\x0a");

      if ((Obj[obj].prop & PROP_OPEN) &&
          (Obj[obj].prop & PROP_ACTOR) == 0)
        PrintContents(obj, "  (which contains)", 0); /* 0: don't print "It's empty."*/
    }
  }

  if (location == INSIDE + O_YOU && flag == 0) 
    PrintCompLine("\xdc\x75\x27\xa9\xe4\xff\xb3\xbb\x72\x79\x84\xad\x79\xa2\x97\x2e");
}

/*******************************************************************************/
void PrintDesc_LivingRoom(void)
{
  if ((Room[R_LIVING_ROOM].prop & R_DESCRIBED) == 0)
  {
    PrintCompText("\x8b\xbb\x9e\xa7\x80\xcb\x69\x76\x84\xc2\xe1\x83\xac\x9e\x9a"
"\xd0\x64\xe9\x72\x77\x61\xc4\xbd\x80\xfb\x61\x73\x74");

    if (CyclopsState == 4) /* fled*/
      PrintCompText("\x9d\xba\x81\x77\xbe\xa6\x9a\xd0\x63\x79\x63\xd9\x70\x73"
"\x2d\x73\xcd\xfc\xab\x6f\xfc\x6e\x84\xa7\xa3\xb4\x6f\x6c\xab\x77\xe9\xe8\xb4"
"\x64\xe9\x72\xb5\x61\x62\x6f\xd7\xb7\xce\xfa\x87\x73\xe1\x9e\xc5\xf4\xb1\x9e"
"\x67\xff\xce\x63\xcb\x65\x74\xd1\xf1\xb1\x2c\x20");
    else
      PrintCompText("\xb5\xd0\x77\xe9\xe8\xb4\x64\xe9\xb6\xf8\xa2\xaa\x74\xf4"
"\xb1\x9e\x67\xff\xce\x63\xcb\x65\x74\xd1\xf1\x9c\xbd\x80\xb7\xbe\x74\xb5\x77"
"\xce\xfa\xa3\x70\xfc\xbb\xa1\xbd\xb0\x9e\x6e\x61\x69\xcf\xab\x73\x68\xf7\x2c\x20");

    PrintCompText("\xd0\x74\xc2\x70\x68\xc4\xe7\xd6\x2c\x20");

    if (RugMoved)
    {
      if (TrapOpen)
        PrintCompLine("\x8c\xad\xae\xfc\xb4\x74\xf4\x70\xcc\xe9\xb6\xaf\x86\xb6\x66\xf3\x74\x2e");
      else
        PrintCompLine("\x8c\xd0\x63\xd9\xd6\xab\x74\xf4\x70\xcc\xe9\xb6\xaf\x86\xb6\x66\xf3\x74\x2e");
    }
    else
    {
      if (TrapOpen)
        PrintCompLine("\x8c\xd0\x72\x75\xc1\xec\x84\xef\x73\x69\xe8\xa3\xb4\x6f"
"\xfc\xb4\x74\xf4\x70\xcc\xe9\x72\x2e");
      else
        PrintCompLine("\x8c\xd0\xfd\x72\x67\x9e\xd3\x69\xd4\x74\xe2\xda\x75\xc1"
"\xa7\x80\xb3\xd4\xd1\xb6\xdd\x80\xda\xe9\x6d\x2e");
    }
  }

  if (Obj[O_TROPHY_CASE].prop & PROP_OPEN)
    PrintContents(O_TROPHY_CASE, "Your collection of treasures consists of:", 0);

  ReturnOverlay0_(0);
}

void PrintDesc_EastOfHouse(void)
{
  if ((Room[R_EAST_OF_HOUSE].prop & R_DESCRIBED) == 0)
  {
    PrintCompText("\x8b\xbb\x9e\xef\xce\xb9\x80\xb7\xce\xd1\xc0\xa5\xd6\xa4\x41"
"\xeb\xaf\xde\xcf\x61\x64\xa1\xa7\xbd\x80\xc6\xd3\xbe\xa6\xbd\x80\xfb\xe0\x74"
"\xa4\x49\xb4\xca\x9e\x63\xd3\xed\xb6\xdd\x80\xc0\xa5\xd6\x80\xa9\x87\xd0\x73"
"\x6d\xe2\xea\xf8\xb9\xf2\xb7\xce\xfa\x87");

    if (KitchenWindowOpen)
      PrintCompLine("\x6f\xfc\x6e\x2e");
    else
      PrintCompLine("\x73\xf5\x67\x68\x74\xec\xa3\x6a\x61\x72\x2e");
  }

  ReturnOverlay0_(0);
}

void PrintDesc_Kitchen(void)
{
  if ((Room[R_KITCHEN].prop & R_DESCRIBED) == 0)
  {
    PrintCompText("\x8b\xbb\x9e\xa7\x80\x20\x6b\xc7\xfa\xd4\x8a\x81\x77\xce\xd1"
"\xc0\xa5\xd6\xa4\x41\x9f\x61\x62\xcf\xaa\xf3\x6d\xa1\xbd\xc0\x61\xd7\xb0\xf3"
"\xb4\xfe\xd5\xda\x65\x63\xd4\x74\xec\xc6\xd3\x80\xeb\xa9\x70\xbb\xaf\x69\xca"
"\x8a\x66\xe9\x64\xa4\x41\xeb\xe0\x73\x61\x67\x9e\xcf\x61\x64\xa1\xbd\x80\xb7"
"\xbe\xa6\x8c\xd0\x64\xbb\x6b\xaa\x74\x61\x69\x72\xe7\xd6\x91\xb0\x9e\xd6\xd4"
"\xcb\xbf\x64\x84\x75\x70\x77\xbb\x64\xa4\x41\xcc\xbb\x6b\xb3\xce\x6d\xed\xc4"
"\xcf\x61\x64\xa1\x64\xf2\xb4\x8c\xbd\x80\xfb\xe0\xa6\x9a\xd0\x73\x6d\xe2\xea"
"\xf8\xb9\xf2\xb7\xce\xfa\x87");

    if (KitchenWindowOpen)
      PrintCompLine("\x6f\xfc\x6e\x2e");
    else
      PrintCompLine("\x73\xf5\x67\x68\x74\xec\xa3\x6a\x61\x72\x2e");
  }

  PrintContents(O_KITCHEN_TABLE, "On the table you see:", 0);

  ReturnOverlay0_(0);
}

void PrintDesc_Attic(void)
{
  if ((Room[R_ATTIC].prop & R_DESCRIBED) == 0)
    PrintCompLine("\xbc\x9a\x9a\x81\xaf\xf0\x63\x83\x9e\xca\xec\xfb\x78\xc7\x87"
"\xd0\xc5\x61\x69\x72\x77\x61\xc4\xcf\x61\x64\x84\x64\xf2\x6e\x2e");

  PrintContents(O_ATTIC_TABLE, "On a table you see:", 0);

  ReturnOverlay0_(0);
}

void PrintDesc_GratingClearing(void)
{
  if ((Room[R_GRATING_CLEARING].prop & R_DESCRIBED) == 0)
    PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xb3\xcf\xbb\x97\xb5\xf8\xa2\xa3\xc6\xd3"
"\xbe\xa6\x73\xd8\xc2\xf6\x64\x84\x8f\xca\xa3\xdf\xaa\x69\xe8\x73\xa4\x41\xeb"
"\xaf\xde\xcf\x61\x64\xa1\x73\xa5\x74\x68\x2e");

  if (GratingRevealed)
  {
    if (GratingOpen)
      PrintCompLine("\x99\xa9\x87\xad\xae\xfc\xb4\x67\xf4\xf0\xb1\xb5\xe8\x73"
"\x63\xd4\x64\x84\xa7\xbd\xcc\xbb\x6b\xed\x73\x73\x2e");
    else
      PrintCompLine("\x99\xa9\x87\xd0\x67\xf4\xf0\x9c\xd6\x63\xd8\x65\xec\xc6"
"\xe0\xd1\xed\xab\xa7\xbd\x80\xe6\xc2\xf6\x64\x2e");
  }

  ReturnOverlay0_(0);
}

void PrintDesc_GratingRoom(void)
{
  if ((Room[R_GRATING_ROOM].prop & R_DESCRIBED) == 0)
    PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xaa\x6d\xe2\xea\xc2\xe1\xe4\xbf\xb6\x81"
"\x6d\x61\x7a\x65\x83\xac\x9e\xbb\x9e\x74\xf8\xc5\xc4\x70\xe0\x73\x61\x67\xbe"
"\xa8\xb4\x81\x69\x6d\x6d\xd5\x69\xaf\x9e\x76\x69\x63\xa7\xc7\x79\x2e");

  if (GratingOpen)
    PrintCompLine("\x41\x62\x6f\xd7\x86\x87\xad\xae\xfc\xb4\x67\xf4\xf0\x9c\xf8"
"\xa2\xaa\xf6\xf5\x67\x68\xa6\x70\xa5\xf1\x9c\x69\x6e\x2e");
  else
    PrintCompLine("\x41\x62\x6f\xd7\x86\x87\xd0\x67\xf4\xf0\x9c\xf8\xa2\xa3\xaa"
"\x6b\x75\xdf\x2d\xad\x64\x2d\x63\xc2\x73\x73\x62\xca\xbe\xcb\x6f\x63\x6b\x2e");

  ReturnOverlay0_(0);
}

void PrintDesc_DamRoom(void)
{
  if ((Room[R_DAM_ROOM].prop & R_DESCRIBED) == 0)
  {
    PrintCompLine("\x8b\xbb\x9e\xc5\xad\x64\x84\xca\x80\x9f\x6f\x70\x8a\x81\x46"
"\xd9\x6f\xab\x43\xca\x74\xc2\xea\x44\x61\xf9\x23\x33\xb5\x77\xce\xfa\xb7\xe0"
"\x20\x71\x75\xc7\x9e\xd0\xbd\xd8\xb2\xa6\xaf\x74\xf4\x63\xf0\xca\xa8\xb4\xf0"
"\x6d\xbe\xc6\xbb\xcc\xb2\x74\xad\x74\x83\xac\x9e\xbb\x9e\x70\xaf\x68\xa1\xbd"
"\x80\xe4\xd3\xa2\xb5\x73\xa5\xa2\xb5\x8c\x77\xbe\x74\xb5\x8c\xd0\x73\x63\xf4"
"\x6d\x62\xcf\xcc\xf2\x6e\x2e");

    if (GatesOpen)
    {
      if (LowTide)
        PrintCompLine("\x85\x77\xaf\xac\xcb\x65\xd7\xea\xef\xce\xb9\x80\xcc\x61"
"\xf9\x9a\xd9\x77\x3a\x82\xaa\x6c\x75\x69\x63\x9e\x67\xaf\xbe\xc0\x61\xd7\xb0"
"\xf3\xb4\x6f\xfc\xed\x64\xa4\x57\xaf\xac\xda\xfe\xa0\xa1\xa2\xc2\x75\x67\xde"
"\x81\x64\x61\xf9\x8c\x64\xf2\x6e\xc5\xa9\x61\x6d\x2e");
      else
        PrintCompLine("\x85\x73\x6c\x75\x69\x63\x9e\x67\xaf\xbe\xa3\xa9\xae\xfc"
"\x6e\xb5\x8c\x77\xaf\xac\xda\xfe\xa0\xa1\xa2\xc2\x75\x67\xde\x81\x64\x61\x6d"
"\x83\x9e\x77\xaf\xac\xcb\x65\xd7\xea\xef\xce\xb9\x80\xcc\x61\xf9\x9a\xc5\x69"
"\xdf\xc0\x69\x67\x68\x2e");
    }
    else
    {
      if (LowTide)
        PrintCompLine("\x85\x73\x6c\x75\x69\x63\x9e\x67\xaf\xbe\xa3\xa9\xb3\xd9"
"\xd6\x64\x83\x9e\x77\xaf\xac\xcb\x65\xd7\xea\xa7\x80\xda\xbe\xac\x76\x6f\x69"
"\xb6\x9a\x71\x75\xc7\x9e\xd9\x77\xb5\x62\xf7\x80\xcb\x65\xd7\xea\x9a\xf1\x73"
"\x84\x71\x75\x69\x63\x6b\x6c\x79\x2e");
      else
        PrintCompLine("\x85\x73\x6c\x75\x69\x63\x9e\x67\xaf\xbe\xae\xb4\x81\x64"
"\x61\xf9\xbb\x9e\x63\xd9\xd6\x64\xa4\x42\x65\xce\xb9\x80\xcc\x61\x6d\xb5\x96"
"\xa9\x91\xb0\x9e\xd6\xd4\xa3\xb7\x69\xe8\xda\xbe\xac\x76\x6f\x69\x72\xa4\x57"
"\xaf\xac\x87\x70\xa5\xf1\x9c\x6f\xd7\xb6\x81\xbd\x70\x8a\x81\xe3\x77\xa3\x62"
"\xad\x64\xca\xd5\xcc\x61\x6d\x2e");
    }
  }

  PrintCompText("\x99\xa9\x87\xd0\x63\xca\x74\xc2\xea\x70\xad\x65\xea\xa0\xa9"
"\xb5\xca\xb7\xce\xfa\xa3\xcb\xbb\x67\x9e\x6d\x65\x74\xe2\xb0\x6f\x6c\xa6\x9a"
"\x6d\xa5\xe5\xd5\xa4\x44\x69\xa9\x63\x74\xec\xa3\x62\x6f\xd7\x80\xb0\x6f\x6c"
"\xa6\x9a\xd0\x73\x6d\xe2\xea\x67\xa9\xd4\xeb\xfd\xc5\x69\x63\xb0\x75\x62\x62\x6c\x65");

  if (GatesButton)
    PrintCompText("\xb7\xce\xfa\x87\x67\xd9\xf8\x9c\xd6\xa9\xed\x6c\x79");

  PrintCompLine("\x2e");

  ReturnOverlay0_(0);
}

void PrintDesc_ReservoirSouth(void)
{
  if ((Room[R_RESERVOIR_SOUTH].prop & R_DESCRIBED) == 0)
  {
    if (GatesOpen)
    {
      if (LowTide)
        PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xcb\xca\xc1\xc2\xe1\xb5\xbd\x80\xe4"
"\xd3\xa2\x8a\x77\xce\xfa\xb7\xe0\xc6\xd3\x6d\xac\xec\xa3\xcb\x61\x6b\x65\xa4"
"\x48\xf2\x65\xd7\x72\xb5\xf8\xa2\x80\xb7\xaf\xac\xcb\x65\xd7\xea\xd9\x77\xac"
"\xd5\xb5\x96\xa9\x87\x6d\xac\x65\xec\xa3\xb7\x69\xe8\xaa\x74\xa9\x61\xf9\x72"
"\xf6\x6e\x84\xa2\xc2\x75\x67\xde\x81\x63\xd4\xd1\xb6\xdd\x80\xda\xe9\x6d\x2e");
      else
        PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xcb\xca\xc1\xc2\xe1\x9d\xba\x81\xe3"
"\x72\xa2\x87\xd0\xfd\x72\x67\x9e\xfd\x6b\x65\xb5\xbd\xba\xe8\x65\x70\x89\x63"
"\xc2\x73\x73\x8e\xc3\xe3\xf0\x63\x65\xb5\x68\xf2\x65\xd7\x72\xb5\xa2\xaf\x80"
"\xb7\xaf\xac\xcb\x65\xd7\xea\x61\x70\xfc\xbb\xa1\xbd\xb0\x9e\x64\xc2\x70\x70"
"\x84\xaf\xa3\xda\x61\x70\x69\xab\xf4\xd1\xa4\x42\x65\x66\xd3\x9e\xd9\xb1\xb5"
"\xc7\xee\x69\x67\x68\xa6\xef\xeb\x6f\x73\x73\x69\x62\xcf\x89\x63\xc2\x73\xa1"
"\xbd\x80\xae\x96\xb6\x73\x69\xe8\xc6\xc2\xf9\xa0\x72\x65\x2e");
    }
    else
    {
      if (LowTide)
        PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xcb\xca\xc1\xc2\xe1\xb5\xbd\x80\xe4"
"\xd3\xa2\x8a\x77\xce\xfa\x87\xd0\xf8\xe8\xa3\xa9\xd0\x77\xce\xfa\xb7\xe0\xc6"
"\xd3\x6d\xac\xec\xa3\xda\xbe\xac\x76\x6f\x69\x72\xb5\x62\xf7\xe4\xf2\x87\x6d"
"\xac\x65\xec\xa3\xaa\x74\xa9\x61\x6d\x8e\xc3\xe3\xf0\x63\x65\xb5\x68\xf2\x65"
"\xd7\x72\xb5\xa2\xaf\x80\xcb\x65\xd7\xea\xdd\x80\xaa\x74\xa9\x61\xf9\x9a\xf1"
"\x73\x84\x71\x75\x69\x63\x6b\xec\x8d\x95\xaf\xb0\x65\x66\xd3\x9e\xd9\x9c\xc7"
"\xb7\x69\xdf\xb0\x9e\x69\x6d\x70\x6f\x73\x73\x69\x62\xcf\x89\x63\xc2\x73\xa1"
"\xa0\x72\x65\x2e");
      else
        PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xcb\xca\xc1\xc2\xe1\xae\xb4\x81\x73"
"\xa5\xa2\xaa\x68\xd3\x9e\xdd\xa3\xcb\xbb\x67\x9e\xfd\x6b\x65\xb5\x66\xbb\x9f"
"\xe9\xcc\xf3\x70\x8d\xb7\x69\xe8\xc6\xd3\xb3\xc2\x73\x73\x97\x2e");
    }

    PrintCompLine("\x99\xa9\x87\xd0\x70\xaf\xde\xe2\xca\xc1\x81\xc5\xa9\x61\xf9"
"\xbd\x80\xfb\xe0\xa6\xd3\xb7\xbe\x74\xb5\xd0\xc5\xf3\x70\xeb\xaf\x68\x77\x61"
"\xc4\x63\xf5\x6d\x62\x84\x73\xa5\xa2\x77\xbe\xa6\xe2\xca\xc1\x81\xd5\x67\x9e"
"\xdd\xa3\xb3\xcd\x73\x6d\xb5\x8c\xd0\x70\xaf\xde\xcf\x61\x64\x84\xa7\xbd\xa3"
"\x91\xc9\xb4\xbd\x80\xaa\xa5\x96\xe0\x74\x2e");
  }

  ReturnOverlay0_(0);
}

void PrintDesc_Reservoir(void)
{
  if ((Room[R_RESERVOIR].prop & R_DESCRIBED) == 0)
  {
    if (LowTide)
    {
      if (GatesOpen == 0 && YouAreInBoat == 0)
        PrintCompLine("\x8b\xe3\xf0\x63\x9e\xa2\xaf\x80\xb7\xaf\xac\xcb\x65\xd7"
"\xea\xa0\xa9\x87\xf1\x73\x84\xf4\x70\x69\x64\xec\x83\x9e\x63\xd8\xa9\xe5\xa1"
"\xbb\x9e\xe2\x73\xba\xef\x63\xe1\x84\xc5\xc2\xb1\xac\xa4\x53\x74\x61\x79\x84"
"\xa0\xa9\xaa\xf3\x6d\xa1\x71\x75\xc7\x9e\xfc\xf1\xd9\x75\x73\x21");
      else
        PrintCompLine("\x8b\xbb\x9e\xca\xb7\xcd\xa6\xfe\xd5\x89\xef\xa3\xcb\xbb"
"\x67\x9e\xfd\x6b\x65\xb5\x62\xf7\xb7\xce\xfa\x87\xe3\x77\xa3\xcb\xbb\x67\x9e"
"\x6d\x75\xab\x70\x69\xcf\x83\xac\x9e\xbb\x9e\x22\x73\x68\xd3\xbe\x22\x89\x81"
"\xe3\x72\xa2\x8d\xaa\xa5\x74\x68\x2e");
    }
    else
      PrintCompLine("\x8b\xbb\x9e\xca\x80\xcb\x61\x6b\x65\xa4\x42\xbf\xfa\xbe"
"\x91\xb0\x9e\xd6\xd4\xe4\xd3\xa2\x8d\xaa\xa5\xa2\xa4\x55\x70\xc5\xa9\x61\xf9"
"\xd0\x73\x6d\xe2\xea\xc5\xa9\x61\xf9\xd4\xd1\x72\xa1\x81\xfd\x6b\x9e\xa2\xc2"
"\x75\x67\xde\xd0\x6e\xbb\xc2\x77\xb3\xcf\x66\xa6\xa7\x80\xda\x6f\x63\x6b\x73"
"\x83\x9e\x64\x61\xf9\xe7\xb4\xef\xaa\xf3\xb4\x64\xf2\x6e\xc5\xa9\x61\x6d\x2e");
  }

  ReturnOverlay0_(0);
}

void PrintDesc_ReservoirNorth(void)
{
  if ((Room[R_RESERVOIR_NORTH].prop & R_DESCRIBED) == 0)
  {
    if (GatesOpen)
    {
      if (LowTide)
        PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xcb\xbb\x67\x9e\xe7\xd7\x72\xe3\xfe"
"\xda\xe9\x6d\xb5\x81\x73\xa5\xa2\x8a\x77\xce\xfa\xb7\xe0\xc6\xd3\x6d\xac\xec"
"\xa3\xcb\x61\x6b\x65\xa4\x48\xf2\x65\xd7\x72\xb5\xf8\xa2\x80\xb7\xaf\xac\xcb"
"\x65\xd7\xea\xd9\x77\xac\xd5\xb5\x96\xa9\x87\x6d\xac\x65\xec\xa3\xb7\x69\xe8"
"\xaa\x74\xa9\x61\xf9\x72\xf6\x6e\x84\xa2\xc2\x75\x67\xde\x96\x72\x65\x2e");
      else
        PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xcb\xbb\x67\x9e\xe7\xd7\x72\xe3\xfe"
"\xa3\xa9\x61\x9d\xba\x81\x73\xa5\xa2\x87\xd0\xf8\xe8\xcb\x61\x6b\x65\xb5\x77"
"\x68\x6f\xd6\xb7\xaf\xac\xcb\x65\xd7\xea\x61\x70\xfc\xbb\xa1\xbd\xb0\x9e\x66"
"\xe2\xf5\x9c\xf4\x70\x69\x64\x6c\x79\x2e");
    }
    else
    {
      if (LowTide)
        PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xb3\x61\xd7\x72\xe3\xfe\xa3\xa9\x61"
"\xb5\xbd\x80\xaa\xa5\xa2\x8a\x77\xce\xfa\x87\xd0\xd7\x72\xc4\xf8\xe8\xaa\x74"
"\xa9\x61\x6d\x83\x9e\xcf\xd7\xea\xdd\x80\xaa\x74\xa9\x61\xf9\x9a\xf1\x73\x84"
"\xf4\x70\x69\x64\xec\xb5\x8c\xc7\xa3\x70\xfc\xbb\xa1\xa2\xaf\xb0\x65\x66\xd3"
"\x9e\xd9\x9c\xc7\xb7\x69\xdf\xb0\x9e\x69\x6d\x70\x6f\x73\x73\x69\x62\xcf\x89"
"\x63\xc2\x73\xa1\xbd\x80\xae\x96\xb6\x73\x69\x64\x65\x2e");
      else
        PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xcb\xbb\x67\x9e\xe7\xd7\x72\xe3\xfe"
"\xda\xe9\x6d\xb5\xe3\x72\xa2\x8a\xd0\xfd\x72\x67\x9e\xfd\x6b\x65\x2e");
    }

    PrintCompLine("\x99\xa9\x87\xd0\x73\xf5\x6d\xc4\xc5\x61\x69\x72\x77\x61\xc4"
"\xcf\x61\x76\x84\x81\xc2\xe1\x89\x81\xe3\x72\x74\x68\x2e");
  }

  ReturnOverlay0_(0);
}

void PrintDesc_LoudRoom(void)
{
  if ((Room[R_LOUD_ROOM].prop & R_DESCRIBED) == 0)
  {
    PrintCompText("\xbc\x9a\x9a\xd0\xfd\x72\x67\x9e\xc2\xe1\xb7\xc7\xde\xd0\x63"
"\x65\x69\xf5\x9c\x77\xce\xfa\x91\xe3\xa6\xef\xcc\x65\xd1\x63\xd1\xab\x66\xc2"
"\xf9\x81\x67\xc2\xf6\x64\x83\xac\x9e\x9a\xd0\x6e\xbb\xc2\x77\xeb\xe0\x73\x61"
"\x67\x9e\x66\xc2\xf9\xbf\xc5\x89\x77\xbe\xa6\x8c\xd0\xc5\xca\x9e\xc5\x61\x69"
"\x72\x77\x61\xc4\xcf\x61\x64\x84\x75\x70\x77\xbb\x64\x2e");

    if (LoudRoomQuiet || (GatesOpen == 0 && LowTide))
      PrintCompLine("\x82\xda\xe9\xf9\x9a\xf3\xf1\x9e\xa7\xa8\x74\xa1\x71\x75"
"\x69\x65\x74\xed\x73\x73\x2e");
    else
      PrintCompLine("\x82\xda\xe9\xf9\x9a\xe8\x61\x66\xd4\x97\xec\xcb\xa5\xab"
"\xf8\xa2\xa3\xb4\xf6\xe8\xd1\x72\x6d\xa7\xd5\xda\xfe\xce\x9c\x73\xa5\xb9\x83"
"\x9e\x73\xa5\xb9\xaa\xf3\x6d\xa1\xbd\xda\x65\xd7\x72\xef\xf4\xd1\xc6\xc2\xf9"
"\xe2\xea\xdd\x80\xb7\xe2\x6c\x73\xb5\x6d\x61\x6b\x84\xc7\xcc\x69\x66\x66\x69"
"\x63\x75\x6c\xa6\x65\xd7\xb4\xbd\x95\xa7\x6b\x2e");
  }

  ReturnOverlay0_(0);
}

void PrintDesc_DeepCanyon(void)
{
  if ((Room[R_DEEP_CANYON].prop & R_DESCRIBED) == 0)
  {
    PrintCompText("\x8b\xbb\x9e\xca\x80\xaa\xa5\xa2\xfb\x64\x67\x9e\xdd\xa3\xcc"
"\xf3\x70\x91\xc9\x6e\xa4\x50\xe0\x73\x61\x67\xbe\xcb\xbf\xab\xdd\xd2\xbd\x80"
"\xfb\xe0\x74\xb5\xe3\x72\xa2\x77\xbe\xa6\x8c\x73\xa5\xa2\x77\xbe\x74\xa4\x41"
"\xaa\x74\x61\x69\x72\x77\x61\xc4\xcf\x61\x64\xa1\x64\xf2\x6e\x2e");

    if (GatesOpen)
    {
      if (LowTide)
        PrintCompLine("\x88\x91\xc0\xbf\xb6\x81\x73\xa5\xb9\x8a\x66\xd9\xf8\x9c"
"\x77\xaf\xac\xc6\xc2\xf9\xef\xd9\x77\x2e");
      else
        PrintCompLine("\x88\x91\xc0\xbf\xb6\xd0\xd9\x75\xab\xc2\xbb\x84\x73\xa5"
"\xb9\xb5\xf5\x6b\x9e\xa2\xaf\x8a\x72\xfe\xce\x9c\x77\xaf\xac\xb5\x66\xc2\xf9\xef\xd9\x77\x2e");
    }
    else
    {
      if (LowTide)
        PrintCompText("\x0a");
      else
        PrintCompLine("\x88\x91\xc0\xbf\xb6\x81\x73\xa5\xb9\x8a\x66\xd9\xf8\x9c"
"\x77\xaf\xac\xc6\xc2\xf9\xef\xd9\x77\x2e");
    }
  }

  ReturnOverlay0_(0);
}

void PrintDesc_MachineRoom(void)
{
  if ((Room[R_MACHINE_ROOM].prop & R_DESCRIBED) == 0)
  {
    PrintCompText("\xbc\x9a\x9a\xd0\xfd\x72\x67\x65\xb5\x63\x6f\x6c\xab\xc2\xe1"
"\xb7\x68\x6f\xd6\xaa\x6f\xcf\xfb\x78\xc7\x87\xbd\x80\xe4\xd3\xa2\xa4\x49\xb4"
"\xca\x9e\x63\xd3\xed\xb6\x96\xa9\x87\xd0\x6d\x61\xfa\xa7\x9e\x77\xce\xfa\x87"
"\xa9\x6d\xa7\xb2\x63\xd4\xa6\xdd\xa3\xb3\xd9\x96\xa1\x64\x72\x79\xac\xa4\x4f"
"\xb4\xc7\xa1\x66\x61\x63\x9e\x9a\xd0\x73\xf8\x74\xfa\xb7\xce\xfa\x87\xfd\xef"
"\xdf\xd5\x20\x22\x53\x54\x41\x52\x54\x22\x83\x9e\x73\xf8\x74\xfa\xcc\x6f\xbe"
"\xe4\xff\xa3\x70\xfc\xbb\x89\xef\xee\xad\x69\x70\x75\xfd\x62\xcf\xb0\xc4\xad"
"\xc4\x68\x75\x6d\xad\xc0\x8c\x28\xf6\xcf\x73\xa1\x81\x66\x97\xac\xa1\xbb\x9e"
"\x61\x62\xa5\xa6\x31\x2f\x31\x36\xb0\xc4\x31\x2f\x34\xa8\x6e\xfa\x29\xa4\x4f"
"\xb4\x81\x66\xc2\xe5\x8a\x81\x6d\x61\xfa\xa7\x9e\x9a\xd0\xfd\x72\x67\x9e\xf5"
"\x64\xb5\x77\xce\xfa\x87");

    if (Obj[O_MACHINE].prop & PROP_OPEN)
      PrintCompLine("\x6f\xfc\x6e\x2e");
    else
      PrintCompLine("\x63\xd9\xd6\x64\x2e");
  }

  ReturnOverlay0_(0);
}

void PrintDesc_AragainFalls(void)
{
  if ((Room[R_ARAGAIN_FALLS].prop & R_DESCRIBED) == 0)
    PrintCompLine("\x8b\xbb\x9e\xaf\x80\x9f\x6f\x70\x8a\x41\xf4\x67\x61\xa7\x20"
"\x46\xe2\x6c\x73\xb5\xad\xfb\xe3\x72\x6d\xa5\xa1\x77\xaf\xac\x66\xe2\xea\xf8"
"\xa2\xa3\xcc\xc2\x70\x8a\x61\x62\xa5\xa6\x34\x35\x30\xc6\xf3\x74\x83\x9e\xca"
"\xec\xeb\xaf\xde\xa0\xa9\x87\xca\x80\xe4\xd3\xa2\xfb\x6e\x64\x2e");

  if (RainbowSolid)
    PrintCompLine("\x41\xaa\x6f\xf5\xab\xf4\xa7\x62\xf2\xaa\x70\xad\xa1\x81\x66"
"\xe2\x6c\x73\x2e");
  else
    PrintCompLine("\x41\xb0\xbf\xf7\x69\x66\x75\xea\xf4\xa7\x62\xf2\x91\xb0\x9e"
"\xd6\xd4\xae\xd7\xb6\x81\x66\xe2\x6c\xa1\x8c\xbd\x80\xb7\xbe\x74\x2e");

  ReturnOverlay0_(0);
}

void PrintDesc_WestOfHouse(void)
{
  if ((Room[R_WEST_OF_HOUSE].prop & R_DESCRIBED) == 0)
  {
    PrintCompText("\x8b\xbb\x9e\xc5\xad\x64\x84\xa7\xa3\xb4\x6f\xfc\xb4\x66\x69"
"\x65\x6c\xab\x77\xbe\xa6\xdd\xa3\xb7\xce\xd1\xc0\xa5\xd6\xb5\xf8\xa2\xa3\xb0"
"\x6f\xbb\xe8\xab\x66\xc2\xe5\xcc\xe9\x72\x2e");

    if (WonGame)
      PrintCompLine("\x20\x41\xaa\x65\x63\xa9\xa6\x70\xaf\xde\xcf\x61\x64\xa1"
"\x73\xa5\xa2\x77\xbe\xa6\xa7\xbd\x80\xc6\xd3\xbe\x74\x2e");
    else
      PrintCompText("\x0a");
  }

  ReturnOverlay0_(0);
}

void PrintDesc_MirrorRoom1(void)
{
  if ((Room[R_MIRROR_R_1].prop & R_DESCRIBED) == 0)
    PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xcb\xbb\x67\x9e\x73\x71\x75\xbb\x9e\xc2"
"\xe1\xb7\xc7\xde\x74\xe2\xea\x63\x65\x69\xf5\xb1\x73\xa4\x4f\xb4\x81\x73\xa5"
"\xa2\xb7\xe2\xea\x9a\xad\xfb\xe3\x72\x6d\xa5\xa1\x6d\x69\x72\xc2\xb6\x77\xce"
"\xfa\xc6\x69\xdf\xa1\x81\xd4\xf0\xa9\xb7\xe2\x6c\x83\xac\x9e\xbb\x9e\x65\x78"
"\xc7\xa1\xca\x80\xae\x96\xb6\xa2\xa9\x9e\x73\x69\xe8\xa1\xdd\x80\xda\xe9\x6d\x2e");

  if (MirrorBroken)
    PrintCompLine("\x55\x6e\x66\xd3\x74\xf6\xaf\x65\xec\xb5\x81\x6d\x69\x72\xc2"
"\xb6\xcd\xa1\xef\xd4\xcc\xbe\x74\xc2\x79\xd5\xb0\xc4\x92\xda\x65\x63\x6b\xcf"
"\x73\x73\xed\x73\x73\x2e");

  ReturnOverlay0_(0);
}

void PrintDesc_MirrorRoom2(void)
{
  if ((Room[R_MIRROR_R_2].prop & R_DESCRIBED) == 0)
    PrintCompLine("\x8b\xbb\x9e\xa7\xa3\xcb\xbb\x67\x9e\x73\x71\x75\xbb\x9e\xc2"
"\xe1\xb7\xc7\xde\x74\xe2\xea\x63\x65\x69\xf5\xb1\x73\xa4\x4f\xb4\x81\x73\xa5"
"\xa2\xb7\xe2\xea\x9a\xad\xfb\xe3\x72\x6d\xa5\xa1\x6d\x69\x72\xc2\xb6\x77\xce"
"\xfa\xc6\x69\xdf\xa1\x81\xd4\xf0\xa9\xb7\xe2\x6c\x83\xac\x9e\xbb\x9e\x65\x78"
"\xc7\xa1\xca\x80\xae\x96\xb6\xa2\xa9\x9e\x73\x69\xe8\xa1\xdd\x80\xda\xe9\x6d\x2e");

  if (MirrorBroken)
    PrintCompLine("\x55\x6e\x66\xd3\x74\xf6\xaf\x65\xec\xb5\x81\x6d\x69\x72\xc2"
"\xb6\xcd\xa1\xef\xd4\xcc\xbe\x74\xc2\x79\xd5\xb0\xc4\x92\xda\x65\x63\x6b\xcf"
"\x73\x73\xed\x73\x73\x2e");

  ReturnOverlay0_(0);
}

void PrintDesc_TorchRoom(void)
{
  if ((Room[R_TORCH_ROOM].prop & R_DESCRIBED) == 0)
    PrintCompLine("\xbc\x9a\x9a\xd0\xfd\x72\x67\x9e\xc2\xe1\xb7\xc7\xde\xd0\x70"
"\xc2\x6d\xa7\xd4\xa6\x64\xe9\x72\x77\x61\xc4\xcf\x61\x64\x84\xbd\xa3\xcc\xf2"
"\xb4\xc5\x61\x69\x72\xe7\xd6\xa4\x41\x62\x6f\xd7\x86\x87\xd0\xfd\x72\x67\x9e"
"\x64\xe1\x65\xa4\x55\x70\xa3\xc2\xf6\xab\x81\xd5\x67\x9e\xdd\x80\xcc\xe1\x9e"
"\x28\x32\x30\xc6\xf3\xa6\x75\x70\x29\x87\xd0\x77\xe9\xe8\xb4\xf4\x69\xf5\xb1"
"\xa4\x49\xb4\x81\x63\xd4\xd1\xb6\xdd\x80\xda\xe9\xf9\x73\xc7\xa1\xd0\x77\xce"
"\xd1\xee\xbb\x62\xcf\xeb\xd5\xbe\x74\x61\x6c\x2e");

  if (RopeTiedToRail)
    PrintCompLine("\x41\xeb\x69\x65\x63\x9e\xdd\xda\x6f\xfc\xcc\xbe\x63\xd4\x64"
"\xa1\x66\xc2\xf9\x81\xf4\x69\xf5\x9c\x61\x62\x6f\xd7\xb5\xd4\x64\x84\x73\xe1"
"\x9e\x66\x69\xd7\xc6\xf3\xa6\x61\x62\x6f\xd7\x86\xb6\xa0\x61\x64\x2e");

  ReturnOverlay0_(0);
}

void PrintDesc_DomeRoom(void)
{
  if ((Room[R_DOME_ROOM].prop & R_DESCRIBED) == 0)
    PrintCompLine("\x8b\xbb\x9e\xaf\x80\xeb\xac\x69\x70\xa0\x72\xc4\xdd\xa3\xcb"
"\xbb\x67\x9e\x64\xe1\x65\xb5\x77\xce\xfa\xc6\xd3\x6d\xa1\x81\x63\x65\x69\xf5"
"\x9c\xdd\xa3\xe3\x96\xb6\xc2\xe1\xb0\x65\xd9\x77\xa4\x50\xc2\xd1\x63\xf0\x9c\x8f"
"\x66\xc2\xf9\xd0\x70\xa9\x63\x69\x70\xc7\xa5\xa1\x64\xc2\x70\x87\xd0\x77\xe9\xe8"
"\xb4\xf4\x69\xf5\x9c\x77\xce\xfa\xb3\x69\x72\x63\xcf\xa1\x81\x64\xe1\x65\x2e");

  if (RopeTiedToRail)
    PrintCompLine("\x48\xad\x67\x84\x64\xf2\xb4\x66\xc2\xf9\x81\xf4\x69\xf5\x9c"
"\x9a\xd0\xc2\xfc\xb7\xce\xfa\xfb\xb9\xa1\x61\x62\xa5\xa6\xd1\xb4\x66\xf3\xa6"
"\x66\xc2\xf9\x81\x66\xd9\xd3\xb0\x65\xd9\x77\x2e");

  ReturnOverlay0_(0);
}

void PrintDesc_CyclopsRoom(void)
{
  if ((Room[R_CYCLOPS_ROOM].prop & R_DESCRIBED) == 0)
    PrintCompLine("\xbc\x9a\xc2\xe1\xc0\xe0\xa3\xb4\x65\x78\xc7\xae\xb4\x81\xe3"
"\x72\xa2\x77\xbe\x74\xb5\x8c\xd0\xc5\x61\x69\x72\xe7\xd6\xcb\xbf\x64\x84\x75\x70\x2e");

  if (CyclopsState == 4)
    PrintCompLine("\x85\xbf\xc5\xb7\xe2\x6c\xb5\x70\xa9\x76\x69\xa5\x73\xec\xaa"
"\x6f\xf5\x64\xb5\xe3\x77\xc0\xe0\xa3\xb3\x79\x63\xd9\x70\x73\x2d\x73\x69\x7a\xd5"
"\xae\xfc\x6e\x84\xa7\xa8\x74\x2e");

  ReturnOverlay0_(0);
}

void PrintDesc_UpATree(void)
{
  if ((Room[R_UP_A_TREE].prop & R_DESCRIBED) == 0)
    PrintCompLine("\x8b\xbb\x9e\x61\x62\xa5\xa6\x31\x30\xc6\xf3\xa6\x61\x62\x6f"
"\xd7\x80\xe6\xc2\xf6\xab\xed\xc5\xcf\xab\x61\x6d\xca\xc1\x73\xe1\x9e\xfd\x72"
"\x67\x9e\x62\xf4\x6e\xfa\xbe\x83\x9e\xed\xbb\xbe\xa6\x62\xf4\x6e\xfa\xa3\x62"
"\x6f\xd7\x86\x87\x61\x62\x6f\xd7\x86\xb6\xa9\x61\x63\x68\x2e");

  PrintPresentObjects(R_PATH, "On the ground below you can see:", 1); /* 1: list, no desc*/

  ReturnOverlay0_(0);
}

